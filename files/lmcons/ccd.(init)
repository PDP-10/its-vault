(COMMENT SYMBOL 15000 LIST 140000 FIXNUM 50000)   ;-*-LISP-*-

(PROGN
 (SETQ PURE 2)	;SUPPOSEDLY DOING THIS AND NEVER CALLING PURIFY
		;WILL CAUSE (SSTATUS UUOLINKS) TO WORK.  WHAT A CROCK!
 (SETQ FOR-CADR T)

(DEFUN COMPLETE-LOAD ()
   (CURSORPOS 'C)
   (PRINT 'RESET-ALL-MEMORIES)
   (CC-REGISTER-DEPOSIT RARSET 0)
   (PRINT 'CC-CLEAR-CORE)
   (CC-CLEAR-CORE)
   (PRINT 'CC-LOAD-UCODE)
   (CC-LOAD-UCODE)
   (PRINT 'LOAD-COLD)
   (LOAD-COLD)
   (PRINT 'CC)
   (TERPRI)
   (CC))   

(SETSYNTAX 43 'NORMAL 43)	;NEEDED TO LOAD MICROCODE SYMBOLS

(DEFUN RECORD-SOURCE-FILE-NAME (N) T)
(DEFUN SPECIAL FEXPR (L) T)
(DEFUN UNSPECIAL FEXPR (L) T)

;PREPARE FOR DUMPING
(DEFUN PDUMP ()
  (CNSUSP)
  (SUSPEND '|:PDUMP LISPM1;TS CADR|)
  (CNSINI)
  (SETQ CC-FULL-SAVE-VALID NIL)
  (SETQ CC-PASSIVE-SAVE-VALID NIL)
  (SETQ CC-DISK-TYPE NIL)
  'READY)

 (SSTATUS GCWHO 1)
 (SETQ CTALK-BARF-AT-WRITE-ERRORS T)
 (DEFPROP UNFASL (UNFASL FASL DSK LMCONS) AUTOLOAD)
 (DEFPROP TECO (LISPT FASL DSK LIBLSP) AUTOLOAD)
 (DEFPROP LEDIT (LEDIT FASL DSK LIBLSP) AUTOLOAD)
 (DEFPROP FLOAD (LEDIT FASL DSK LIBLSP) AUTOLOAD)
 (DEFPROP CLOAD (LEDIT FASL DSK LIBLSP) AUTOLOAD)
 (DEFPROP BS (BS FASL DSK LIBLSP) AUTOLOAD)
 (FASLOAD UTIL FASL DSK LISPM)
 (FASLOAD UTIL1 FASL DSK LISPM)
 (READFILE '(QCOM > DSK LISPM))
 (FASLOAD CCGSYL FASL DSK LMCONS)
 (FASLOAD CC FASL DSK LMCONS)
   (LOAD '((LMCONS)CADREG >))   ;NO OVERLAYING ANY MORE
   (LOAD '((LMCONS)CADRD FASL))
;Don't bother with diagnostics in pdp10 version, they just take up space
;Load them in by hand if you really want them.
;   (LOAD '((LMCONS)DPDIAG FASL))
;   (LOAD '((LMCONS)ADRTST FASL))
;   (LOAD '((LMCONS)SHFTST FASL))
;   (LOAD '((LMCONS)DSPTST FASL))
   (LOAD '((LMCONS)TDBG FASL))
   (LOAD '((LMCONS)ZERO FASL))
   (LOAD '((LMCONS)CADLD FASL))

 (SORT '(1) 'LESSP) ;GET SORT INTO CORE
 (SSTATUS UUOLINKS) ;BECAUSE OF OVERLAYING
 (CC-CONSOLE-INIT)
 (LOAD '((LCADR)PACKED FASL)) 
 (FASLOAD CLOAD FASL DSK LCADR)
 (FASLOAD CCDISK FASL DSK LCADR)
 (FASLOAD CADTLK FASL DSK LCADR)
 (FASLOAD QF FASL DSK LCADR) ;turd has to be loaded after QCOM
 (TERPRI))

(PROGN (CLOSE (PROG2 NIL INFILE (INPUSH -1)))
       (PRINC '|Load microcode symbols for version:|)
       (APPLY 'CC-LOAD-UCODE-SYMBOLS
	      (LIST '(LISPM1) 'UCADR (IMPLODE (NCONC ((LAMBDA (IBASE BASE *NOPOINT)
							      (EXPLODEN (READ)))
						      10. 10. T)
						     '(S Y M)))))
       (TERPRI)
       (PDUMP))