
;FILE SYSTEM PARAMETERS

DADDNL==410300,,	;DISK ADDRESS DISK NUMBER FIELD BYTE ADDRESS LH
DADDNR==170300,,	;RH
DADTNL==221700,,	;TRACK NUMBER LH
DADTNR==001700,,	;RH
DTMSK==77777	;MASK FOR DISK TRACK

;PHYSICAL CHARACTERISTICS

NCYLS==200.	;# CYLINDERS NORMALLY USED
XCYLS==3	;# EXTRA CYLINDERS FOR SPARES, HACKS, ETC.
NHEDS==20.	;# TRACKS/CYLINDER
NSECS==2	;# BLKS/TRK
NBLKSC==NHEDS*NSECS	;# BLKS/CYL
NBLKS==NCYLS*NBLKSC	;TOTAL # REG BLKS
XBLKS==XCYLS*NBLKSC	;# XTRA BLKS

;EXTRA WORDS IN BLOCK

XWBLK==1700,,	;BP TO PREV BLK # IN FILE FLD
XWAWC==171200,,	;BP TO ACTIVE WD CNT
XWSYSN==1
XWFN1==2
XWFN2==3

;MFD INFO

MFDBLK==NBLKS/2-1	;LOC ON DISK
	;RANDOM INFO
	MDNUM==0	;ASCENDING DIR NUM
	MDNAMP==1	;PNTR TO ORG OF NAME AREA
	MDYEAR==2	;CURRENT YEAR
	MPDOFF==3	;DE-CORIOLIS CLOCK OFFSET
	MPDWDK==4	;PREFERRED WRITING DISK (PHYSICAL DRIVE #)
	MDCHK==5	;THIS WORD MUST BE M.F.D. (FOR CHECKING)
	LMIBLK==6	;TOTAL STG USED BY HACKS LIKE THIS
	;USER NAME BLKS FROM C(MDNAMP) TO END
	LMNBLK==2	;# WDS/BLK
	MNUNAM==0	;6BIT USER NAME

;TUT INFO

TUTBLK==MFDBLK-1	;LOC ON DISK
TUTBYT==4	;SIZE OF BYTES
TUTBP==440400,,
TUTEPW==36./TUTBYT	;NUMBER OF ENTRIES PER WORD
TUTLN==<NBLKS-1>/TUTEPW+1	;NUMBER OF WORDS IN TUT
TUTLK==1_<TUTBYT>-1	;HIGHEST CODE MEANS LOCKED OUT
TUTMNY==TUTLK-1	;TUT MANY OR MORE REFS
QTUTP==1777	;FS POINTER TO TRACK AREA.  ADVANCE BY CYLINDERS
QPKNUM==1776	;PACK #
QPAKID==1775	;PACK ID
QSWAPA==1774	;SWAPPING AREA.  FIRST TRACK OF NON-SWAPPING AREA
LTIBLK==4	;STG FOR RANDOM INFO ^

;UFD INFO
;USER DIR IN TRACK NUMBERED SAME AS INDEX IN MFD (SEE QFL2)

NUDSL==200.	;# UFDS SPACE RESERVED
UFDBYT==6	;SIZE OF BYTES
UFDBPW==36./UFDBYT	;NUMBER OF BYTES PER WORD
	;RANDOM INFO

	UDESCP==0	;FS PNTR TO DESC AREA
	UDNAMP==1	;PNTR TO ORG OF NAME AREA
	UDNAME==2	;USER NAME (FOR CHECKING)
	UDDESC==11.	;FIRST LOC AVAIL FOR DESC

	;UFD DESCRIPTORS
	;0 => FREE  1-UDTKMX => TAKE NEXT N
	;UDTKMX+1 THRU UDWPH-1 => SKIP N-UDTKMX AND TAKE ONE
	;40 BIT SET => LOAD ADDRESS.  LOWER 5 BITS PLUS NEXT TWO CHARS (17 BITS IN ALL)

	;IF LINK DESCR
	;6 CHAR OR UNTIL ; = SYS NAME.  MUST HAVE NO CHAR = 0 IN THIS OR NEXT 2 NAMES
	;NEXT CHAR QUOTED BY : (FOR NAMES WITH : OR ;)
	;NEXT CHAR N1
	;NEXT CHAR N2
	;END BY 0

	UDTKMX==12.	;HIGHEST "TAKE N" CODE
	UDWPH==31.	;PLACE HOLDER ON WRITE (OR NULL FILE)
	NXLBYT==2	;# ADDITIONAL BYTES FOR LOAD ADDR

	;NAME AREA DATA

	LUNBLK==5	;WDS/NAME BLK
	UNFN1==0	;FIRST FN
	UNFN2==1	;SECOND FN
	UNRNDM==2	;ALL KINDS OF RANDOM INFO
		UNDSCP==1500,,	;PNTR TO DESC
		UNPKN==150500,,	;PACK #
		UNLINK==1	;LINK BIT
		UNLNKB==220100,,
		UNWRIT==4	;OPEN FOR WRITING
		UNMARK==10	;GC MARK BIT
		UNCDEL==20	;DEL WHEN CLOSED
		UNPDEL==40	;DEL FROM UNMOUNTED PACK
		DELBTS==UNCDEL+UNPDEL	;DELETED -- IGNORE
		UNIGFL==DELBTS+UNWRIT	;BITS TO IGNORE FILE
		UNDBLK==301300,,	;BLK # DESC BLK (0 => NONE)
		UNDUMP==400000	;HAS BEEN DUMPED
	UNDATE==3	;DATE ETC.
		UNTIM==2200,,	;COMPACTED TIME OF CREATION
		UNYMD==221200,,	;Y,M,D OF CREATION
		UNREFT==341000,,	;DAYS AFTER CREATION LAST REFERENCED
		UNMON==270400,,	;MONTH
		UNDAY==220500,,	;DAY
		UNYRB==330100,,	;YEAR BIT

IF1 [
IFG NUDSL*LMNBLK+LMIBLK-2000,[PRINTX /MFD LOSES
/]
IFG NBLKS/<36./TUTBYT>+LTIBLK-2000,[PRINTX /TUT LOSES
/]
]
