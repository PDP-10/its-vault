;;; -*- Package: BOXER -*-

;auto filling for boxer.  To get auto filling in a box, do
;SPACE-KEYAUTO-FILL-SPACE
;Use the boxer-function SET-FILL-COLUMN to change the default, which is 72.
;The indirection and fill column lookup is done in lisp to be fast.

(defvar *auto-fill-column* 72.)
(defvar *space-key-function* 'com-self-insert)

(defboxer-function bu:set-fill-column (n)
  (check-arg n numberp "a number")
  (if (< n 0)
      (setq *space-key-function* 'com-self-insert)
      (setq *space-key-function* 'com-auto-fill-space))
  (setq *auto-fill-column* n))



(defboxer-function bu:auto-fill-space com-auto-fill-space)

(defun com-auto-fill-space ()
  (cond ((>= (bp-cha-no *point*) *auto-fill-column*)
	 (com-backward-word)
	 (com-return)
	 (com-forward-word)))
  (com-self-insert))


