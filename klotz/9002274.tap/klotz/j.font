Received: from MC.LCS.MIT.EDU (CHAOS 3131) by AI.AI.MIT.EDU 31 Dec 86 18:49:07 EST
Received: from AI.AI.MIT.EDU (CHAOS 3130) by MC.LCS.MIT.EDU 31 Dec 86 18:06:47 EST
Received: from SUMEX-AIM.STANFORD.EDU (TCP 1200000070) by AI.AI.MIT.EDU 29 Dec 86 17:31:52 EST
Date: Mon 29 Dec 86 14:26:33-PST
From: Mark Crispin <Crispin@SUMEX-AIM.STANFORD.EDU>
Subject: JIS kanji font format
Postal-Address: 1802 Hackett Ave.; Mountain View, CA  94043-4431
Phone: +1 (415) 968-1052
Message-ID: <12266749323.27.CRISPIN@SUMEX-AIM.STANFORD.EDU>
ReSent-Date: Mon 29 Dec 86 14:29:39-PST
ReSent-From: Mark Crispin <Crispin@SUMEX-AIM.STANFORD.EDU>
ReSent-To: Nihongo%MC.LCS.MIT.EDU@AI.AI.MIT.EDU
ReSent-Message-ID: <12266749887.27.CRISPIN@SUMEX-AIM.STANFORD.EDU>

     Here are the important details about the format of the JIS
kanji font as far as I've been able to determine.  This font is
on SUMEX-AIM.STANFORD.EDU as PS:<CRISPIN>FONT24.DAT.  I tried to
send it to the NIHONGO list before, but MIT-MC has been down for
the past several days.  My ability to read Japanese can be more
accurately categorized as "decyphering" than "reading", but I
think this description is truthful as far as it goes.

     There are 6932 records in the font.  Each record contains
128 8-bit bytes, and is followed by a line feed (you Unix guys'll
love this!).  Therefore there are (128+1)*6932 = 894228 bytes in
the file.

     The first record starts with ".HDR1000830901C623424240"
followed by spaces to pad out the record.  ".HDR1" is the start
code, then there is a revision field (all zeros), the date of the
font in YYMMDD format (September 1, 1983), the JIS standard
number "C6234", a "2424" field (I can't read the kanji), and a
"0" field.

     Data records have a 5-byte header, a 3-byte revision code, a
6-byte date in YYMMDD format, a 2-byte JIS code (starting with
[21h,21h] this is the 14-bit representation of kanji for data), a
4 byte JIS something-or-other, 6 1-bit fields of something or
other of which two are blank, a 10 bit field consisting of 5 2
bit fields that seems to convey information of aspects of the
character (distance from left border, width, distance from top
border, height, and height, and distance from top border of
descender), a two 6-bit fields with 1,2,1,2 bit subfields
containing something-or-other, a 6-bit blank field, the font
image in 72 bytes, and finally two bytes of nulls.

     The font image is a 24x24 dot pattern.  The first byte
represents the left-most 8 bits of the top line, the second byte
the middle 8-bits, the third byte the right-most 8-bits of the
top line, the fourth byte the leftmost 8 bits of the second line,
and so forth until the 72nd byte for the right-most 8-bits of the
bottom line.

     I am assuming that the MSB is the left-most bit in each
byte, but that may be my PDP-10 big-endian prejudices showing
through.  I haven't tried displaying any kanji that I know yet.

     The final record starts with ".TRL1" and has padding for the
remainder of the record.
-------

